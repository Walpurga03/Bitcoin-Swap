<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Demo Account Generator</title>
    <script src="https://unpkg.com/nostr-tools/lib/nostr.bundle.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .account { background: #2a2a2a; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #6b46c1; }
        .key { background: #0f0f0f; padding: 8px; border-radius: 4px; font-family: monospace; word-break: break-all; margin: 5px 0; }
        button { padding: 10px 20px; background: #6b46c1; color: white; border: none; border-radius: 5px; margin: 5px; }
        .copy-btn { background: #059669; }
    </style>
</head>
<body>
    <h2>ðŸ”‘ Demo Account Generator</h2>
    <p>Generiert Demo-Accounts fÃ¼r das Bitcoin-Tausch-Netzwerk</p>
    
    <button onclick="generateAccounts()">5 Demo-Accounts generieren</button>
    <button onclick="copyAllNpubs()">ðŸ“‹ Alle NPubs fÃ¼r config.js kopieren</button>
    
    <div id="accounts"></div>
    
    <div id="configOutput" style="display:none;">
        <h3>FÃ¼r config.js (AUTHORIZED_MEMBERS):</h3>
        <div class="key" id="configCode"></div>
        <button class="copy-btn" onclick="copyConfig()">ðŸ“‹ Config-Code kopieren</button>
    </div>

    <script>
        let allNpubs = [];
        let allAccounts = [];
        
        function generateAccounts() {
            const accountsDiv = document.getElementById('accounts');
            const names = ['Demo User', 'Alice Bitcoin', 'Bob Lightning', 'Charlie Hodler', 'Diana Trader'];
            
            accountsDiv.innerHTML = '';
            allNpubs = [];
            allAccounts = [];
            
            for (let i = 0; i < 5; i++) {
                try {
                    // Generate random private key
                    const privateKey = window.NostrTools.generatePrivateKey();
                    const nsec = window.NostrTools.nip19.nsecEncode(privateKey);
                    const npub = window.NostrTools.nip19.npubEncode(window.NostrTools.getPublicKey(privateKey));
                    
                    const account = {
                        name: names[i],
                        nsec: nsec,
                        npub: npub
                    };
                    
                    allAccounts.push(account);
                    allNpubs.push(npub);
                    
                    accountsDiv.innerHTML += `
                        <div class="account">
                            <h4>ðŸ‘¤ ${account.name}</h4>
                            <p><strong>nsec (Private Key):</strong></p>
                            <div class="key">${account.nsec}</div>
                            <p><strong>npub (Public Key):</strong></p>
                            <div class="key">${account.npub}</div>
                            <button onclick="copyKey('${account.nsec}')">ðŸ“‹ nsec kopieren</button>
                            <button onclick="copyKey('${account.npub}')">ðŸ“‹ npub kopieren</button>
                        </div>
                    `;
                    
                } catch (error) {
                    console.error('Error generating account:', error);
                }
            }
            
            // Generate config code
            const configCode = allNpubs.map((npub, index) => 
                `    '${npub}',  // ${names[index]}`
            ).join('\\n');
            
            document.getElementById('configCode').textContent = configCode;
            document.getElementById('configOutput').style.display = 'block';
            
            console.log('âœ… Generated', allAccounts.length, 'demo accounts');
        }
        
        function copyKey(key) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(key).then(() => {
                    alert('âœ… Key copied!');
                });
            } else {
                prompt('Copy this key:', key);
            }
        }
        
        function copyAllNpubs() {
            const npubList = allNpubs.join('\\n');
            if (navigator.clipboard) {
                navigator.clipboard.writeText(npubList).then(() => {
                    alert('âœ… All NPubs copied!');
                });
            } else {
                prompt('Copy these NPubs:', npubList);
            }
        }
        
        function copyConfig() {
            const configText = document.getElementById('configCode').textContent;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(configText).then(() => {
                    alert('âœ… Config code copied!');
                });
            } else {
                prompt('Copy this config code:', configText);
            }
        }
        
        // Auto-generate on load
        window.onload = () => generateAccounts();
    </script>
</body>
</html>
